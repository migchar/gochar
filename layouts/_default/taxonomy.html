{{ define "main" }}
<div id="container" class="site-refresh default-taxonomy">
    {{ partial "bar-main.html" . }}
    <main id="post-main" class="post-main-wrapper mx-auto px-1 px-lg-5">
    <div class="row">
        <div class="col-md-3 d-none d-md-block pl-4 pl-lg-0">
            {{ partial "bar-left.html" . }}
        </div>
        <!-- Post list -->
        <div id="main" class="col-12 col-md-9 col-lg-6 p-0">
                <div class="heading">
                    <div class="inner">
                    <span class="underline-span pl-1 mr-2 font-weight-bold">
                        {{ partial "page-heading.html" . }}
                    </span>
                    <span class="ml-2">
                        {{i18n .Page.Type}}
                    </span>
                    {{ $page_num := (len .Data.Pages)}}
                    {{ if gt $page_num 0 }}
                        <span>
                            {{ i18n "postCount" $page_num }}
                        </span>
                    {{ end }}
                    </div>
                </div>

                {{ if .Content }}
                <div class="post-content markdown">
                    {{ .Content }}
                </div>
                {{ end }}

            <div class="posts-collapse pt-0">
                {{ if eq .Site.Params.bloggroupby "month" }}
                    {{ $.Scratch.Set "datespec" "2006.1" }}
                    {{ else if eq .Site.Params.bloggroupby "year" }}
                    {{ $.Scratch.Set "datespec" "2006" }}
                {{ end }}

                {{ if not ($.Scratch.Get "datespec") }}
                    {{ range .Data.Pages.ByDate.Reverse }}
                        {{ partial "li.html" . }}
                    {{ end }}
                {{ else }}
                    {{ range .Data.Pages.ByDate.GroupByDate ($.Scratch.Get "datespec") "desc" }}
                    <li class="post-item no-bullet">
                        <span class="date">{{ .Key }}</span>
                    </li>
                        {{ range .Pages.ByDate.Reverse }}
                            {{ partial "li.html" . }}
                        {{ end }}
                    {{ end }}
                {{ end }}
            </div>
        </div>
        <!-- /.Post list -->
        {{ partial "bar-right.html" . }}
    </div>
    </main>
</div>
{{ end }}
